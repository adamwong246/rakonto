import{useState as p,useEffect as x}from"react";import{createRoot as R}from"react-dom/client";import{jsx as l,jsxs as d}from"react/jsx-runtime";function j(c){let h=()=>{let[r,m]=p(null),[v,S]=p({}),[n,b]=p(""),[f,g]=p(!1);x(()=>{let e={};c.stories.forEach(i=>{let t=i.split("/"),o=e;for(let s=0;s<t.length;s++){let a=t[s];s===t.length-1?o[a]={path:i}:(o[a]||(o[a]={}),o=o[a])}}),S(e),c.stories.length>0&&!r&&m(c.stories[0])},[]),x(()=>{if(r){g(!0),console.log("Setting selected story:",r);let e=`/story-iframe.html?story=${encodeURIComponent(r)}`;console.log("Iframe URL:",e),b(e)}},[r]);let L=(e,i)=>{let t=i.split("/"),o=e;for(let s of t)if(o=o[s],!o)return null;return o},u=(e,i="")=>Object.keys(e).map(t=>{let o=i?`${i}/${t}`:t;if(e[t].path){let s=e[t].path,a=t.replace(".stories.js","").replace(".js","");return l("div",{onClick:()=>m(s),style:{padding:"8px 12px 8px 20px",margin:"2px 0",cursor:"pointer",borderRadius:"4px",backgroundColor:r===s?"grey":"transparent",color:r===s?"white":"#333",fontWeight:r===s?"bold":"normal",fontSize:"14px",transition:"all 0.2s ease"},children:a},s)}else return d("div",{style:{marginLeft:"0px"},children:[l("div",{style:{fontWeight:"bold",margin:"8px 0 4px 0",padding:"6px 12px",fontSize:"14px",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),l("div",{style:{marginLeft:"10px"},children:u(e[t],o)})]},o)}),w=r?r.split("/").pop().replace(".stories.js","").replace(".js",""):"";return d("div",{style:{display:"flex",height:"100vh"},children:[d("div",{style:{width:"280px",borderRight:"1px solid #ddd",backgroundColor:"#f8f9fa",padding:"20px",overflow:"auto"},children:[l("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"Stories"}),u(v)]}),d("div",{style:{flex:1,padding:"20px",overflow:"auto",backgroundColor:"#fff"},children:[f&&!n&&l("div",{children:"Loading story..."}),n&&l("iframe",{src:n,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",display:f?"none":"block"},title:"Story Preview",onLoad:()=>{console.log("Iframe loaded successfully:",n),g(!1)},onError:e=>{console.log("Iframe failed to load:",n,e),g(!1)}},n),!f&&r&&!n&&d("div",{children:["Error loading story: ",r]})]})]})},y=document.getElementById("root");R(y).render(l(h,{}))}export{j as initRakonto};
//# sourceMappingURL=index.js.map

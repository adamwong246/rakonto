{
  "version": 3,
  "sources": ["../../../dist/index.js"],
  "sourcesContent": ["import React, { useState, useEffect } from 'react';\nimport { createRoot } from 'react-dom/client';\n\nexport function initRakonto(config) {\n    const App = () => {\n        const [selectedStory, setSelectedStory] = useState(null);\n    const [storiesTree, setStoriesTree] = useState({});\n    const [iframeContent, setIframeContent] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    \n    // Build the tree structure from the flat list of stories\n    useEffect(() => {\n        const tree = {};\n        \n        config.stories.forEach(storyPath => {\n            // Split the path to build the tree structure\n            const parts = storyPath.split('/');\n            let current = tree;\n            \n            // Build the directory structure\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                if (i === parts.length - 1) {\n                    // It's the story file - store the full path\n                    current[part] = { \n                        path: storyPath\n                    };\n                } else {\n                    // It's a directory\n                    if (!current[part]) {\n                        current[part] = {};\n                    }\n                    current = current[part];\n                }\n            }\n        });\n        \n        setStoriesTree(tree);\n        // Set the first story as selected\n        if (config.stories.length > 0 && !selectedStory) {\n            setSelectedStory(config.stories[0]);\n        }\n    }, []);\n    \n    // Load the selected story dynamically and prepare iframe content\n    useEffect(() => {\n        if (selectedStory) {\n            setIsLoading(true);\n            console.log('Setting selected story:', selectedStory);\n            // Create a unique URL for the iframe to load the story\n            // We'll use a query parameter to tell the iframe which story to load\n            const iframeUrl = `/story-iframe.html?story=${encodeURIComponent(selectedStory)}`;\n            console.log('Iframe URL:', iframeUrl);\n            setIframeContent(iframeUrl);\n            // Don't set isLoading to false here - wait for iframe to load\n        }\n    }, [selectedStory]);\n    \n    // Helper function to find a story in the tree by path\n    const findStoryInTree = (tree, path) => {\n        const parts = path.split('/');\n        let current = tree;\n        \n        for (const part of parts) {\n            current = current[part];\n            if (!current) return null;\n        }\n        \n        return current;\n    };\n\n    // Recursive function to render the tree\n    const renderTree = (node, path = '') => {\n        return Object.keys(node).map(key => {\n            const currentPath = path ? `${path}/${key}` : key;\n            \n            if (node[key].path) {\n                // It's a story\n                const storyPath = node[key].path;\n                const displayName = key.replace('.stories.js', '').replace('.js', '');\n                \n                return (\n                    <div\n                        key={storyPath}\n                        onClick={() => setSelectedStory(storyPath)}\n                        style={{\n                            padding: '8px 12px 8px 20px',\n                            margin: '2px 0',\n                            cursor: 'pointer',\n                            borderRadius: '4px',\n                            backgroundColor: selectedStory === storyPath ? 'grey' : 'transparent',\n                            color: selectedStory === storyPath ? 'white' : '#333',\n                            fontWeight: selectedStory === storyPath ? 'bold' : 'normal',\n                            fontSize: '14px',\n                            transition: 'all 0.2s ease'\n                        }}\n                    >\n                        {displayName}\n                    </div>\n                );\n            } else {\n                // It's a directory\n                return (\n                    <div key={currentPath} style={{ marginLeft: '0px' }}>\n                        <div style={{ \n                            fontWeight: 'bold', \n                            margin: '8px 0 4px 0',\n                            padding: '6px 12px',\n                            fontSize: '14px',\n                            color: '#666',\n                            textTransform: 'uppercase',\n                            letterSpacing: '0.5px'\n                        }}>\n                            {key}\n                        </div>\n                        <div style={{ marginLeft: '10px' }}>\n                            {renderTree(node[key], currentPath)}\n                        </div>\n                    </div>\n                );\n            }\n        });\n    };\n\n    const displayName = selectedStory ? selectedStory.split('/').pop().replace('.stories.js', '').replace('.js', '') : '';\n    \n    return (\n        <div style={{ display: 'flex', height: '100vh' }}>\n            {/* Left Column - Tree View */}\n            <div style={{ \n                width: '280px', \n                borderRight: '1px solid #ddd',\n                backgroundColor: '#f8f9fa',\n                padding: '20px',\n                overflow: 'auto'\n            }}>\n                <h3 style={{ marginTop: 0, marginBottom: '20px', color: '#333' }}>Stories</h3>\n                {renderTree(storiesTree)}\n            </div>\n            \n            {/* Right Column - Component Display */}\n            <div style={{ \n                flex: 1, \n                padding: '20px',\n                overflow: 'auto',\n                backgroundColor: '#fff'\n            }}>\n                {/* <h1 style={{ marginTop: 0, marginBottom: '20px', color: '#333' }}>\n                    {displayName || 'Select a Story'}\n                </h1> */}\n                {isLoading && !iframeContent && <div>Loading story...</div>}\n                {iframeContent && (\n                    <iframe\n                        key={iframeContent} // Force re-render when URL changes\n                        src={iframeContent}\n                        style={{\n                            width: '100%',\n                            height: '100%',\n                            border: 'none',\n                            borderRadius: '8px',\n                            display: isLoading ? 'none' : 'block'\n                        }}\n                        title=\"Story Preview\"\n                        onLoad={() => {\n                            console.log('Iframe loaded successfully:', iframeContent);\n                            setIsLoading(false);\n                        }}\n                        onError={(e) => {\n                            console.log('Iframe failed to load:', iframeContent, e);\n                            setIsLoading(false);\n                        }}\n                    />\n                )}\n                {!isLoading && selectedStory && !iframeContent && (\n                    <div>Error loading story: {selectedStory}</div>\n                )}\n            </div>\n        </div>\n        );\n    };\n\n    const container = document.getElementById('root');\n    const root = createRoot(container);\n    root.render(<App />);\n}\n"],
  "mappings": "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",
  "names": ["displayName"]
}
